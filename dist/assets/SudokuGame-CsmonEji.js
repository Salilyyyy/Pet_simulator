import{r as h,j as r,m as u}from"./framer-ImROKbaA.js";import{u as Q,s as b}from"./index-jsN2LwRi.js";import"./vendor-Bzgz95E1.js";import"./zustand-C3EHBv_w.js";const se=()=>{const{setMessage:F,completeMiniGame:O}=Q(),[m,y]=h.useState([]),[x,B]=h.useState(null),[q,T]=h.useState(null),[f,V]=h.useState(!1),[p,N]=h.useState(!1),[j,H]=h.useState(600),[w,$]=h.useState(0),[g,R]=h.useState(3),d=9,o=3,D=h.useCallback(()=>{const l=[];for(let s=0;s<d;s++){l[s]=[];for(let a=0;a<d;a++)l[s][a]={value:0,isFixed:!1,isValid:!0,notes:new Set}}L(l),G(l,0,o);const e=45,t=[];for(let s=0;s<d;s++)for(let a=0;a<d;a++)t.push({row:s,col:a});for(let s=t.length-1;s>0;s--){const a=Math.floor(Math.random()*(s+1));[t[s],t[a]]=[t[a],t[s]]}for(let s=0;s<e&&s<t.length;s++){const{row:a,col:i}=t[s];l[a][i].value=0,l[a][i].isFixed=!1}return l},[]),L=l=>{for(let e=0;e<d;e+=o)U(l,e,e)},U=(l,e,t)=>{let s;for(let a=0;a<o;a++)for(let i=0;i<o;i++){do s=Math.floor(Math.random()*d)+1;while(!S(l,e+a,t+i,s));l[e+a][t+i].value=s,l[e+a][t+i].isFixed=!0}},G=(l,e,t)=>{if(t>=d&&e<d-1&&(e=e+1,t=0),e>=d&&t>=d)return!0;if(e<o)t<o&&(t=o);else if(e<d-o)t===Math.floor(e/o)*o&&(t=t+o);else if(t===d-o&&(e=e+1,t=0,e>=d))return!0;for(let s=1;s<=d;s++)if(S(l,e,t,s)){if(l[e][t].value=s,l[e][t].isFixed=!0,G(l,e,t+1))return!0;l[e][t].value=0,l[e][t].isFixed=!1}return!1},S=(l,e,t,s)=>{for(let n=0;n<d;n++)if(l[e][n].value===s)return!1;for(let n=0;n<d;n++)if(l[n][t].value===s)return!1;const a=e-e%o,i=t-t%o;for(let n=0;n<o;n++)for(let c=0;c<o;c++)if(l[n+a][c+i].value===s)return!1;return!0},z=l=>{for(let e=0;e<d;e++)for(let t=0;t<d;t++)if(l[e][t].value===0)return!1;for(let e=0;e<d;e++)if(!Z(l,e)||!_(l,e)||!A(l,e))return!1;return!0},Z=(l,e)=>{const t=new Set;for(let s=0;s<d;s++){const a=l[e][s].value;if(a!==0){if(t.has(a))return!1;t.add(a)}}return!0},_=(l,e)=>{const t=new Set;for(let s=0;s<d;s++){const a=l[s][e].value;if(a!==0){if(t.has(a))return!1;t.add(a)}}return!0},A=(l,e)=>{const t=new Set,s=Math.floor(e/o)*o,a=e%o*o;for(let i=0;i<o;i++)for(let n=0;n<o;n++){const c=l[s+i][a+n].value;if(c!==0){if(t.has(c))return!1;t.add(c)}}return!0},M=l=>{const e=l.map(t=>t.map(s=>({...s,isValid:!0})));for(let t=0;t<d;t++)for(let s=0;s<d;s++){const a=e[t][s];if(a.value!==0&&!a.isFixed){for(let c=0;c<d;c++)c!==s&&e[t][c].value===a.value&&(e[t][s].isValid=!1,e[t][c].isValid=!1),c!==t&&e[c][s].value===a.value&&(e[t][s].isValid=!1,e[c][s].isValid=!1);const i=Math.floor(t/o)*o,n=Math.floor(s/o)*o;for(let c=0;c<o;c++)for(let v=0;v<o;v++){const k=i+c,C=n+v;(k!==t||C!==s)&&e[k][C].value===a.value&&(e[t][s].isValid=!1,e[k][C].isValid=!1)}}}return e},E=()=>{V(!0);const l=D();y(l),B(null),T(null),N(!1),H(600),$(0),R(3),b.playGameStart()},X=(l,e)=>{!f||p||m[l][e].isFixed||(B({row:l,col:e}),b.playTileSelect())},Y=l=>{if(!x||!f||p)return;const{row:e,col:t}=x;if(m[e][t].isFixed)return;const a=m.map(n=>n.map(c=>({...c,notes:new Set(c.notes)})));a[e][t].value=l,a[e][t].notes.clear();const i=M(a);if(y(i),i[e][t].isValid?b.playMatchSuccess():($(n=>n+1),b.playMatchFailure()),z(i)){N(!0),b.playGameComplete();const n=Math.max(0,1e3-w*50-Math.floor((600-j)/10));O("sudoku",n,w)}},J=()=>{if(g<=0||!f||p)return;const l=[];for(let a=0;a<d;a++)for(let i=0;i<d;i++)m[a][i].value===0&&l.push({row:a,col:i});if(l.length===0)return;const e=l[Math.floor(Math.random()*l.length)],{row:t,col:s}=e;for(let a=1;a<=d;a++)if(S(m,t,s,a)){const i=m.map(n=>n.map(c=>({...c,notes:new Set(c.notes)})));i[t][s].value=a,i[t][s].isFixed=!0,y(M(i)),R(n=>n-1),b.playMatchSuccess();break}},K=()=>{if(!x||!f||p)return;const{row:l,col:e}=x;if(m[l][e].isFixed)return;const s=m.map(a=>a.map(i=>({...i,notes:new Set(i.notes)})));s[l][e].value=0,s[l][e].notes.clear(),y(M(s))},P=l=>{const e=Math.floor(l/60),t=l%60;return`${e}:${t.toString().padStart(2,"0")}`};return h.useEffect(()=>{if(!f||p)return;const l=setInterval(()=>{H(e=>e<=1?(N(!0),F(`‚è∞ Time's up! You made ${w} mistakes.`),0):e-1)},1e3);return()=>clearInterval(l)},[f,p,w,F]),r.jsxs(u.div,{className:"max-w-4xl mx-auto p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx(u.h2,{className:"text-3xl font-bold gradient-text mb-4",initial:{scale:.9},animate:{scale:1},transition:{delay:.2},children:"üß© Pet Sudoku"}),r.jsx("p",{className:"text-gray-300 mb-4",children:"Fill the grid with numbers 1-9. No repeats in rows, columns, or boxes!"}),f?r.jsxs("div",{className:"flex justify-center gap-6 mb-4",children:[r.jsx("div",{className:"glass-card px-4 py-2 rounded-lg",children:r.jsxs("span",{className:"text-white font-semibold",children:["Time: ",P(j)]})}),r.jsx("div",{className:"glass-card px-4 py-2 rounded-lg",children:r.jsxs("span",{className:"text-white font-semibold",children:["Mistakes: ",w]})}),r.jsx("div",{className:"glass-card px-4 py-2 rounded-lg",children:r.jsxs("span",{className:"text-white font-semibold",children:["Hints: ",g]})})]}):r.jsx(u.button,{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white px-8 py-3 rounded-xl font-bold shadow-lg hover:shadow-blue-500/30 transition-all duration-300 btn-modern",onClick:E,whileHover:{scale:1.05},whileTap:{scale:.95},children:"üéÆ Start Game"})]}),f&&r.jsx(u.div,{className:"relative mb-6",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3},children:r.jsx("div",{className:"grid grid-cols-9 gap-1 max-w-2xl mx-auto bg-black/20 p-4 rounded-2xl backdrop-blur-sm",children:m.map((l,e)=>l.map((t,s)=>{const a=x?.row===e&&x?.col===s,i=x?.row===e,n=x?.col===s,c=x&&Math.floor(x.row/o)===Math.floor(e/o)&&Math.floor(x.col/o)===Math.floor(s/o);return r.jsxs(u.div,{className:`aspect-square rounded-lg cursor-pointer transition-all duration-200 relative ${t.isFixed?"bg-blue-500/20 border-2 border-blue-400/50":a?"bg-yellow-400/30 border-2 border-yellow-400":i||n||c?"bg-gray-600/20 border border-gray-400/30":"bg-gray-700/10 border border-gray-500/20 hover:bg-gray-600/20"} ${t.isValid?"":"ring-2 ring-red-400"}`,onClick:()=>X(e,s),whileHover:t.isFixed?{}:{scale:1.05},whileTap:t.isFixed?{}:{scale:.95},children:[r.jsx("div",{className:"w-full h-full flex items-center justify-center text-xl font-bold",children:t.value!==0?r.jsx("span",{className:`${t.isFixed?"text-blue-300":t.isValid?"text-white":"text-red-400"}`,children:t.value}):t.notes.size>0?r.jsx("div",{className:"grid grid-cols-3 gap-0 text-xs text-gray-400 w-full h-full p-1",children:[1,2,3,4,5,6,7,8,9].map(v=>r.jsx("div",{className:"flex items-center justify-center",children:t.notes.has(v)?v:""},v))}):null}),r.jsx("div",{className:`absolute inset-0 pointer-events-none ${(e+1)%3===0&&e<8?"border-b-4 border-gray-400":""} ${(s+1)%3===0&&s<8?"border-r-4 border-gray-400":""}`})]},`${e}-${s}`)}))})}),f&&!p&&r.jsxs(u.div,{className:"flex flex-col items-center gap-4 mb-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:[r.jsx("div",{className:"grid grid-cols-9 gap-2 max-w-2xl",children:[1,2,3,4,5,6,7,8,9].map(l=>r.jsx(u.button,{className:`aspect-square rounded-lg font-bold text-xl transition-all duration-200 ${q===l?"bg-yellow-400 text-black shadow-lg":"bg-gray-600 hover:bg-gray-500 text-white"}`,onClick:()=>{T(l),Y(l)},whileHover:{scale:1.05},whileTap:{scale:.95},children:l},l))}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx(u.button,{className:"bg-red-600 hover:bg-red-500 text-white px-6 py-2 rounded-lg font-bold",onClick:K,whileHover:{scale:1.05},whileTap:{scale:.95},children:"üóëÔ∏è Erase"}),r.jsxs(u.button,{className:`px-6 py-2 rounded-lg font-bold ${g>0?"bg-green-600 hover:bg-green-500 text-white":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,onClick:J,disabled:g<=0,whileHover:g>0?{scale:1.05}:{},whileTap:g>0?{scale:.95}:{},children:["üí° Hint (",g,")"]})]})]}),p&&r.jsx(u.div,{className:"text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:r.jsxs("div",{className:"glass-card p-6 rounded-2xl inline-block",children:[r.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:z(m)?"üéâ Puzzle Solved!":"‚è∞ Time's Up!"}),r.jsxs("p",{className:"text-gray-300 mb-4",children:["Mistakes: ",w," | Time: ",P(600-j)," | Hints Used: ",3-g]}),r.jsxs("div",{className:"flex gap-3 justify-center",children:[r.jsx(u.button,{className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white px-6 py-2 rounded-xl font-bold btn-modern",onClick:E,whileHover:{scale:1.05},whileTap:{scale:.95},children:"üîÑ New Puzzle"}),r.jsx(u.button,{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-2 rounded-xl font-bold btn-modern",onClick:()=>V(!1),whileHover:{scale:1.05},whileTap:{scale:.95},children:"üè† Back to Menu"})]})]})}),!f&&r.jsxs(u.div,{className:"glass-card p-6 rounded-2xl mt-6 max-w-2xl mx-auto",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[r.jsx("h3",{className:"text-xl font-bold text-white mb-4 text-center",children:"üìã How to Play"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-300",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("span",{className:"text-2xl",children:"üéØ"}),r.jsxs("div",{children:[r.jsx("strong",{className:"text-white",children:"Objective:"})," Fill all cells with numbers 1-9"]})]}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("span",{className:"text-2xl",children:"üìè"}),r.jsxs("div",{children:[r.jsx("strong",{className:"text-white",children:"Rules:"})," No repeats in rows, columns, or 3x3 boxes"]})]}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("span",{className:"text-2xl",children:"üîµ"}),r.jsxs("div",{children:[r.jsx("strong",{className:"text-white",children:"Fixed:"})," Blue numbers are given clues"]})]}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("span",{className:"text-2xl",children:"üí°"}),r.jsxs("div",{children:[r.jsx("strong",{className:"text-white",children:"Hints:"})," Get help with difficult cells"]})]})]})]})]})};export{se as default};
