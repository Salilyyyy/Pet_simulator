import{r,j as e,m as n,A as O}from"./framer-ImROKbaA.js";import{u as C,s as y}from"./index-DIWj36YF.js";import"./vendor-Bzgz95E1.js";import"./zustand-C3EHBv_w.js";const m=20,h=20,g=[{x:10,y:10}],u={x:0,y:-1},G=150,H=()=>{const{setMessage:f,completeMiniGame:p,currentPet:P}=C(),[t,d]=r.useState({snake:g,food:{x:15,y:15},direction:u,gameOver:!1,score:0,isPlaying:!1}),x=r.useCallback(s=>{let a;do a={x:Math.floor(Math.random()*m),y:Math.floor(Math.random()*h)};while(s.some(i=>i.x===a.x&&i.y===a.y));return a},[]),j=r.useCallback((s,a)=>s.x<0||s.x>=m||s.y<0||s.y>=h?!0:a.some(i=>i.x===s.x&&i.y===s.y),[]),b=r.useCallback(()=>{d(s=>{if(s.gameOver||!s.isPlaying)return s;const a=[...s.snake],i={...a[0]};if(i.x+=s.direction.x,i.y+=s.direction.y,j(i,a))return{...s,gameOver:!0,isPlaying:!1};a.unshift(i);let l=s.food,c=s.score;return i.x===s.food.x&&i.y===s.food.y?(c+=10,l=x(a),setTimeout(()=>y.playMatchSuccess(),50)):a.pop(),{...s,snake:a,food:l,score:c}})},[j,x]),o=r.useCallback(s=>{d(a=>s.x===-a.direction.x&&s.y===-a.direction.y||s.x===a.direction.x&&s.y===a.direction.y?a:{...a,direction:s})},[]);r.useEffect(()=>{const s=a=>{if(t.isPlaying)switch(a.key){case"ArrowUp":case"w":case"W":a.preventDefault(),o({x:0,y:-1});break;case"ArrowDown":case"s":case"S":a.preventDefault(),o({x:0,y:1});break;case"ArrowLeft":case"a":case"A":a.preventDefault(),o({x:-1,y:0});break;case"ArrowRight":case"d":case"D":a.preventDefault(),o({x:1,y:0});break}};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[t.isPlaying,o]),r.useEffect(()=>{if(!t.isPlaying||t.gameOver)return;const s=setInterval(b,G);return()=>clearInterval(s)},[t.isPlaying,t.gameOver,b]);const w=r.useCallback(()=>{const s=x(g);d({snake:g,food:s,direction:u,gameOver:!1,score:0,isPlaying:!0}),y.playGameStart()},[x]),E=r.useCallback(()=>{d({snake:g,food:{x:15,y:15},direction:u,gameOver:!1,score:0,isPlaying:!1})},[]);r.useEffect(()=>{t.gameOver&&(y.playMatchFailure(),p("snake-game",t.score,Math.floor(t.score/10)),f(`ğŸ Game Over! Final Score: ${t.score}`))},[t.gameOver,t.score,p,f]);const v=P?.typeData.emoji||"ğŸ";return e.jsxs(n.div,{className:"max-w-4xl mx-auto p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(n.h2,{className:"text-3xl font-bold gradient-text mb-4",initial:{scale:1},animate:{scale:1},transition:{delay:.2},children:"ğŸ Snake Game"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Control your pet snake! Eat food to grow and avoid hitting walls or yourself!"}),!t.isPlaying&&!t.gameOver?e.jsx(n.button,{className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white px-8 py-3 rounded-xl font-bold shadow-lg hover:shadow-green-500/30 transition-all duration-300 btn-modern",onClick:w,whileHover:{scale:1.05},whileTap:{scale:.95},children:"ğŸ® Start Game"}):e.jsxs("div",{className:"flex justify-center gap-6 mb-4",children:[e.jsx("div",{className:"glass-card px-4 py-2 rounded-lg",children:e.jsxs("span",{className:"text-white font-semibold",children:["Score: ",t.score]})}),e.jsx("div",{className:"glass-card px-4 py-2 rounded-lg",children:e.jsxs("span",{className:"text-white font-semibold",children:["Length: ",t.snake.length]})})]})]}),e.jsxs(n.div,{className:"relative mb-6 flex justify-center",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3},children:[e.jsx("div",{className:"p-4 rounded-xl border-2 border-gray-600 bg-gray-900/50",style:{width:"520px",height:"520px"},children:e.jsx("div",{className:"grid gap-0.5 w-full h-full",style:{gridTemplateColumns:`repeat(${m}, 1fr)`,gridTemplateRows:`repeat(${h}, 1fr)`},children:e.jsx(O,{children:Array.from({length:h},(s,a)=>Array.from({length:m},(i,l)=>{const c=t.snake[0]?.x===l&&t.snake[0]?.y===a,N=t.snake.slice(1).some(A=>A.x===l&&A.y===a),k=t.food.x===l&&t.food.y===a;return e.jsxs(n.div,{className:`aspect-square rounded-sm border border-gray-700/30 flex items-center justify-center text-sm ${c?"bg-green-500 shadow-lg shadow-green-500/50":N?"bg-green-400":k?"bg-red-500 animate-pulse":"bg-gray-800/30"}`,initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:{delay:(l+a)*.002,duration:.3},children:[c&&e.jsx(n.span,{animate:{scale:[1,1.1,1],rotate:t.direction.x>0?90:t.direction.x<0?-90:t.direction.y>0?180:0},transition:{duration:.3},children:v}),N&&"ğŸŸ¢",k&&"ğŸ"]},`${l}-${a}`)}))})})}),e.jsx(O,{children:t.gameOver&&e.jsx(n.div,{className:"absolute inset-0 bg-black/80 rounded-xl flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsxs(n.div,{className:"text-center glass-card p-6 rounded-2xl",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2},children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"ğŸ’€ Game Over!"}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Final Score: ",t.score,e.jsx("br",{}),"Snake Length: ",t.snake.length]}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx(n.button,{className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white px-6 py-2 rounded-xl font-bold btn-modern",onClick:w,whileHover:{scale:1.05},whileTap:{scale:.95},children:"ğŸ”„ Play Again"}),e.jsx(n.button,{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-2 rounded-xl font-bold btn-modern",onClick:E,whileHover:{scale:1.05},whileTap:{scale:.95},children:"ğŸ  Back to Menu"})]})]})})})]}),t.isPlaying&&e.jsx(n.div,{className:"text-center",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:e.jsxs("div",{className:"glass-card p-4 rounded-xl inline-block",children:[e.jsx("h4",{className:"text-white font-bold mb-2",children:"ğŸ® Controls"}),e.jsxs("div",{className:"text-sm text-gray-300 grid grid-cols-2 gap-2",children:[e.jsx("div",{children:"â†‘/W: Up"}),e.jsx("div",{children:"â†“/S: Down"}),e.jsx("div",{children:"â†/A: Left"}),e.jsx("div",{children:"â†’/D: Right"})]})]})}),!t.isPlaying&&!t.gameOver&&e.jsxs(n.div,{className:"glass-card p-6 rounded-2xl mt-6 max-w-2xl mx-auto",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4 text-center",children:"ğŸ“‹ How to Play"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-300",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:v}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-white",children:"Snake Head:"})," Your pet controls the snake"]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"ğŸ"}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-white",children:"Food:"})," Eat to grow and increase score"]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"ğŸ¯"}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-white",children:"Objective:"})," Grow as long as possible"]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"âš ï¸"}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-white",children:"Avoid:"})," Walls and your own body"]})]})]})]})]})};export{H as default};
