import{r as n,j as e,m as l,A as T}from"./framer-ImROKbaA.js";import{u as _,s as b}from"./index-CWbnnzAN.js";import"./vendor-Bzgz95E1.js";import"./zustand-C3EHBv_w.js";const I=["ğŸ","ğŸŒ","ğŸ¥•","ğŸ‡"],X=()=>{const{currentPet:k,completeMiniGame:v}=_(),[s,N]=n.useState(!1),[o,w]=n.useState(!1),[x,h]=n.useState(0),[u,M]=n.useState(50),[H,p]=n.useState([]),[g,S]=n.useState(3),f=n.useRef(null),c=n.useRef(null),y=400,d=500,F=60,i=30,O=2,C=()=>{N(!0),w(!1),h(0),S(3),M(50),p([]),b.playGameStart()},P=n.useCallback(a=>{if(!f.current||!s)return;const t=f.current.getBoundingClientRect(),m=(a.clientX-t.left)/t.width*100;M(Math.max(0,Math.min(100,m)))},[s]),G=n.useCallback(()=>{if(!s)return;const a={id:Date.now()+Math.random(),x:Math.random()*(y-i),y:-i,type:I[Math.floor(Math.random()*I.length)],speed:O+Math.random()*2,caught:!1};p(t=>[...t,a])},[s]),A=n.useCallback(()=>{!s||o||p(a=>a.map(t=>{if(t.caught)return t;const r=t.y+t.speed,m=u/100*(y-F);return r+i>=d-40&&r<=d-10&&t.x>=m&&t.x<=m+F?(h(j=>j+10),b.playMatchSuccess(),{...t,caught:!0}):r+i>=d?(S(j=>{const E=j-1;return E<=0&&(w(!0),h(D=>(v("feeding-frenzy",D,0),D))),Math.max(0,E)}),b.playMatchFailure(),{...t,caught:!0}):{...t,y:r}}).filter(t=>!t.caught))},[s,o,u,v]);return n.useEffect(()=>{if(!s)return;const a=()=>{A(),c.current=requestAnimationFrame(a)};return c.current=requestAnimationFrame(a),()=>{c.current&&cancelAnimationFrame(c.current)}},[s,A]),n.useEffect(()=>{if(!s)return;const a=setInterval(()=>{Math.random()<.7&&G()},1e3);return()=>clearInterval(a)},[s,G]),e.jsxs(l.div,{className:"max-w-4xl mx-auto p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(l.h2,{className:"text-3xl font-bold gradient-text mb-4",initial:{scale:.9},animate:{scale:1},transition:{delay:.2},children:"ğŸ Feeding Frenzy"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Catch falling food to feed your pet! Don't let any hit the ground!"}),s?e.jsxs("div",{className:"flex justify-center gap-6 mb-4",children:[e.jsx("div",{className:"glass-card px-4 py-2 rounded-lg",children:e.jsxs("span",{className:"text-white font-semibold",children:["Score: ",x]})}),e.jsx("div",{className:"glass-card px-4 py-2 rounded-lg",children:e.jsxs("span",{className:"text-white font-semibold",children:["Lives: ","â¤ï¸".repeat(g)]})})]}):e.jsx(l.button,{className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white px-8 py-3 rounded-xl font-bold shadow-lg hover:shadow-green-500/30 transition-all duration-300 btn-modern",onClick:C,whileHover:{scale:1.05},whileTap:{scale:.95},children:"ğŸ® Start Game"})]}),s&&!o&&e.jsx(l.div,{className:"relative mx-auto",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3},children:e.jsxs("div",{ref:f,className:"relative bg-gradient-to-b from-blue-400 via-blue-500 to-blue-600 rounded-2xl shadow-2xl overflow-hidden cursor-crosshair",style:{width:y,height:d},onMouseMove:P,children:[e.jsxs("div",{className:"absolute inset-0 opacity-20",children:[e.jsx("div",{className:"absolute top-10 left-10 w-16 h-16 bg-white/20 rounded-full animate-bounce",style:{animationDelay:"0s"}}),e.jsx("div",{className:"absolute top-20 right-20 w-12 h-12 bg-white/20 rounded-full animate-bounce",style:{animationDelay:"1s"}}),e.jsx("div",{className:"absolute bottom-20 left-1/4 w-8 h-8 bg-white/20 rounded-full animate-bounce",style:{animationDelay:"2s"}})]}),e.jsx(T,{children:H.map(a=>e.jsx(l.div,{className:"absolute text-2xl",style:{left:a.x,top:a.y,width:i,height:i},initial:{scale:0},animate:{scale:1},exit:{scale:0,opacity:0},transition:{duration:.2},children:e.jsx(l.span,{animate:{rotate:[0,5,-5,0],y:[0,-2,0]},transition:{duration:1,repeat:1/0,ease:"easeInOut"},children:a.type})},a.id))}),e.jsx(l.div,{className:"absolute bottom-4 text-4xl",style:{left:`${u}%`,transform:"translateX(-50%)"},animate:{scale:[1,1.05,1],rotate:[0,2,-2,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:k?.typeData.emoji||"ğŸ±"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-transparent via-yellow-400 to-transparent"}),e.jsx("div",{className:"absolute top-4 left-4 flex gap-1",children:Array.from({length:3},(a,t)=>e.jsx(l.span,{className:"text-xl",animate:{scale:t<g?[1,1.2,1]:[1,.8,1],opacity:t<g?1:.3},transition:{duration:.5},children:"â¤ï¸"},t))}),e.jsx("div",{className:"absolute top-4 right-4 glass-card px-3 py-1 rounded-lg",children:e.jsx("span",{className:"text-white font-bold text-sm",children:x})})]})}),o&&e.jsx(l.div,{className:"text-center mt-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:e.jsxs("div",{className:"glass-card p-6 rounded-2xl inline-block",children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"ğŸ’” Game Over!"}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Final Score: ",x,e.jsx("br",{}),"Better luck next time!"]}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx(l.button,{className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white px-6 py-2 rounded-xl font-bold btn-modern",onClick:C,whileHover:{scale:1.05},whileTap:{scale:.95},children:"ğŸ”„ Play Again"}),e.jsx(l.button,{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-2 rounded-xl font-bold btn-modern",onClick:()=>N(!1),whileHover:{scale:1.05},whileTap:{scale:.95},children:"ğŸ  Back to Menu"})]})]})}),!s&&e.jsxs(l.div,{className:"glass-card p-6 rounded-2xl mt-6 max-w-2xl mx-auto",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4 text-center",children:"ğŸ“‹ How to Play"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-300",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"ğŸ¯"}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-white",children:"Objective:"})," Catch falling food with your pet"]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"ğŸ–±ï¸"}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-white",children:"Controls:"})," Move mouse to control your pet"]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"â¤ï¸"}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-white",children:"Lives:"})," You have 3 lives, don't let food hit the ground"]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"ğŸ†"}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-white",children:"Goal:"})," Survive as long as possible!"]})]})]})]})]})};export{X as default};
