import{r as i,j as e,m as r,A as _}from"./framer-ImROKbaA.js";import{u as U,s as g}from"./index-DIWj36YF.js";import"./vendor-Bzgz95E1.js";import"./zustand-C3EHBv_w.js";const d=400,u=500,f=80,W=10,K=8,Y=5,A=8,v=d/A,w=20,N=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7"],te=()=>{const{currentPet:q,setMessage:k,completeMiniGame:S}=U(),[o,C]=i.useState(!1),[h,M]=i.useState(!1),[l,G]=i.useState(!1),[m,H]=i.useState(0),[$,I]=i.useState(3),[p,R]=i.useState({x:d/2,y:u-50,dx:3,dy:-3,radius:K}),[x,E]=i.useState({x:d/2-f/2,y:u-20,width:f,height:W,speed:8}),[b,D]=i.useState(()=>{const s=[];for(let a=0;a<Y;a++)for(let t=0;t<A;t++)s.push({x:t*v,y:a*w+50,width:v,height:w,visible:!0,color:N[a%N.length]});return s}),B=i.useRef(null),j=i.useRef(null),V=q?.typeData.emoji||"ğŸ±",L=i.useCallback(()=>{C(!0),M(!1),G(!1),H(0),I(3),R({x:d/2,y:u-50,dx:3,dy:-3,radius:K}),E({x:d/2-f/2,y:u-20,width:f,height:W,speed:8});const s=[];for(let a=0;a<Y;a++)for(let t=0;t<A;t++)s.push({x:t*v,y:a*w+50,width:v,height:w,visible:!0,color:N[a%N.length]});D(s),g.playGameStart()},[]),X=i.useCallback(s=>{if(!B.current||!o||h||l)return;const a=B.current.getBoundingClientRect(),t=s.clientX-a.left,c=Math.max(0,Math.min(d-f,t-f/2));E(n=>({...n,x:c}))},[o,h,l]),P=(s,a)=>s.x+s.radius>a.x&&s.x-s.radius<a.x+a.width&&s.y+s.radius>a.y&&s.y-s.radius<a.y+a.height,T=i.useCallback(()=>{if(!o||h||l)return;R(a=>{let t={...a};if(t.x+=t.dx,t.y+=t.dy,(t.x-t.radius<=0||t.x+t.radius>=d)&&(t.dx=-t.dx,g.playTileSelect()),t.y-t.radius<=0&&(t.dy=-t.dy,g.playTileSelect()),P(t,x)){const n=((t.x-x.x)/x.width-.5)*Math.PI/3,y=Math.sqrt(t.dx*t.dx+t.dy*t.dy);t.dx=y*Math.sin(n),t.dy=-Math.abs(y*Math.cos(n)),g.playMatchSuccess()}return D(c=>{for(let n=0;n<c.length;n++){const y=c[n];if(y.visible&&P(t,y)){const F=[...c];F[n]={...y,visible:!1},H(z=>z+10),t.dy=Math.abs(t.dy);const O=1.02;return t.dx*=O,t.dy*=O,g.playMatchSuccess(),F}}return c}),t.y+t.radius>=u&&I(c=>{const n=c-1;return n<=0?(M(!0),S("breakout",m,0),k(`ğŸ’” Game Over! Final Score: ${m}`)):(t.x=d/2,t.y=u-50,t.dx=3,t.dy=-3),n}),t}),b.filter(a=>a.visible).length===0&&!l&&(G(!0),S("breakout",m+100,1),k(`ğŸ‰ You won! All bricks cleared! Score: ${m+100}`),g.playGameComplete())},[o,h,l,x,b,m,S,k]);return i.useEffect(()=>{if(!o)return;const s=()=>{T(),j.current=requestAnimationFrame(s)};return j.current=requestAnimationFrame(s),()=>{j.current&&cancelAnimationFrame(j.current)}},[o,T]),e.jsxs(r.div,{className:"max-w-4xl mx-auto p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(r.h2,{className:"text-3xl font-bold gradient-text mb-4",initial:{scale:.9},animate:{scale:1},transition:{delay:.2},children:"ğŸ§± Breakout"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Break all the bricks with your ball! Control the paddle to keep the ball in play."}),e.jsxs(r.div,{className:"text-center mb-4",animate:{scale:l?[1,1.1,1]:1,rotate:l?[0,-5,5,0]:0},transition:{duration:.5},children:[e.jsx("div",{className:"text-6xl mb-2",children:V}),e.jsxs("div",{className:"text-gray-300",children:[l&&"ğŸ‰ Amazing!",h&&"ğŸ’” Oh no!",!l&&!h&&"Help me break those bricks! ğŸ§±"]})]}),o?e.jsxs("div",{className:"flex justify-center gap-6 mb-4",children:[e.jsx("div",{className:"glass-card px-4 py-2 rounded-lg",children:e.jsxs("span",{className:"text-white font-semibold",children:["Score: ",m]})}),e.jsx("div",{className:"glass-card px-4 py-2 rounded-lg",children:e.jsxs("span",{className:"text-white font-semibold",children:["Lives: ","â¤ï¸".repeat($)]})}),e.jsx("div",{className:"glass-card px-4 py-2 rounded-lg",children:e.jsxs("span",{className:"text-white font-semibold",children:["Bricks: ",b.filter(s=>s.visible).length]})})]}):e.jsx(r.button,{className:"bg-gradient-to-r from-orange-500 to-red-600 text-white px-8 py-3 rounded-xl font-bold shadow-lg hover:shadow-orange-500/30 transition-all duration-300 btn-modern",onClick:L,whileHover:{scale:1.05},whileTap:{scale:.95},children:"ğŸ® Start Game"})]}),o&&e.jsx("div",{className:"flex justify-center mb-8",children:e.jsx(r.div,{className:"relative bg-gradient-to-b from-blue-900 to-purple-900 rounded-2xl shadow-2xl overflow-hidden",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3},children:e.jsxs("div",{ref:B,className:"relative cursor-crosshair",style:{width:d,height:u},onMouseMove:X,children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-indigo-900 to-purple-900 opacity-50"}),e.jsx(_,{children:b.map((s,a)=>s.visible&&e.jsx(r.div,{className:"absolute rounded-sm border border-white/20",style:{left:s.x,top:s.y,width:s.width-2,height:s.height-2,backgroundColor:s.color},initial:{scale:1},exit:{scale:0,opacity:0,transition:{duration:.2}}},a))}),e.jsx(r.div,{className:"absolute w-4 h-4 bg-yellow-400 rounded-full shadow-lg shadow-yellow-400/50",style:{left:p.x-p.radius,top:p.y-p.radius,width:p.radius*2,height:p.radius*2},animate:{scale:[1,1.1,1]},transition:{duration:.3,repeat:1/0}}),e.jsx(r.div,{className:"absolute bg-gradient-to-r from-cyan-400 to-blue-500 rounded-lg shadow-lg",style:{left:x.x,top:x.y,width:x.width,height:x.height},animate:{scale:[1,1.02,1]},transition:{duration:1,repeat:1/0}}),e.jsx(_,{children:(h||l)&&e.jsx(r.div,{className:"absolute inset-0 bg-black/80 rounded-2xl flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsxs(r.div,{className:"text-center glass-card p-6 rounded-2xl",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2},children:[e.jsx("h3",{className:`text-3xl font-bold mb-2 ${l?"text-green-400":"text-red-400"}`,children:l?"ğŸ‰ You Win!":"ğŸ’” Game Over!"}),e.jsxs("p",{className:"text-gray-300 mb-4",children:[l?"All bricks cleared!":"You ran out of lives!",e.jsx("br",{}),"Final Score: ",m]}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx(r.button,{className:"bg-gradient-to-r from-purple-500 to-pink-600 text-white px-6 py-2 rounded-xl font-bold btn-modern",onClick:L,whileHover:{scale:1.05},whileTap:{scale:.95},children:"ğŸ”„ Play Again"}),e.jsx(r.button,{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-2 rounded-xl font-bold btn-modern",onClick:()=>C(!1),whileHover:{scale:1.05},whileTap:{scale:.95},children:"ğŸ  Back to Menu"})]})]})})})]})})}),!o&&e.jsxs(r.div,{className:"glass-card p-6 rounded-2xl mt-8 max-w-2xl mx-auto",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4 text-center",children:"ğŸ“‹ How to Play"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-300",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"ğŸ“"}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-white",children:"Ball:"})," Bounces off walls, paddle, and bricks"]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"ğŸŠ"}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-white",children:"Paddle:"})," Move mouse to control paddle position"]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"ğŸ§±"}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-white",children:"Bricks:"})," Break them by hitting with the ball"]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"â¤ï¸"}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-white",children:"Lives:"})," You have 3 lives, don't let ball fall"]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"ğŸ¯"}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-white",children:"Objective:"})," Break all bricks to win"]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"ğŸ†"}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-white",children:"Score:"})," 10 points per brick broken"]})]})]})]})]})};export{te as default};
