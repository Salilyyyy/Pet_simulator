import{r as n,j as e,m as r,A as L}from"./framer-ImROKbaA.js";import{u as q,s as v}from"./index-CWbnnzAN.js";import"./vendor-Bzgz95E1.js";import"./zustand-C3EHBv_w.js";const R=["ğŸ","ğŸŒ","ğŸ‡","ğŸ‘"],J=()=>{const{currentPet:_,setMessage:S,completeMiniGame:E}=q(),[a,F]=n.useState(!1),[h,I]=n.useState(!1),[c,A]=n.useState(0),[p,C]=n.useState(3),[g,G]=n.useState(200),[Y,f]=n.useState([]),[w,y]=n.useState([]),N=n.useRef(null),j=n.useRef(null),b=400,M=500,P=40,o=30,B=2,H=8,D=()=>{F(!0),I(!1),A(0),C(3),G(200),f([]),y([]),v.playGameStart()},X=n.useCallback(s=>{if(!N.current||!a)return;const t=N.current.getBoundingClientRect(),l=s.clientX-t.left;G(Math.max(P/2,Math.min(b-P/2,l)))},[a]),T=n.useCallback(()=>{if(!a)return;const s={id:Date.now()+Math.random(),x:Math.random()*(b-o),y:-o,type:R[Math.floor(Math.random()*R.length)],speed:B+Math.random()*1.5,hit:!1};f(t=>[...t,s])},[a]),k=n.useCallback(()=>{!a||h||(f(s=>s.map(t=>{if(t.hit)return t;const l=t.y+t.speed;return l+o>=M?(C(m=>{const d=m-1;return d<=0&&(I(!0),E("catch-game",c,Math.floor(c/10)),S(`ğŸ’” Game Over! Final Score: ${c}`)),Math.max(0,d)}),v.playMatchFailure(),{...t,hit:!0}):{...t,y:l}}).filter(t=>!t.hit)),y(s=>s.map(t=>{if(t.hit)return t;const l=t.progress+H/100;return l>=1?{...t,hit:!0}:{...t,progress:l}}).filter(t=>!t.hit)),f(s=>s.map(t=>{if(t.hit)return t;const l=t.x+o/2,m=t.y+o/2,d=w.find(i=>{if(i.hit)return!1;const x=i.x+(i.targetX-i.x)*i.progress,u=i.y+(i.targetY-i.y)*i.progress;return Math.sqrt(Math.pow(x-l,2)+Math.pow(u-m,2))<o/2});if(d){y(x=>x.map(u=>u.id===d.id?{...u,hit:!0}:u));const i=t.type==="ğŸ"?10:t.type==="ğŸŒ"?15:t.type==="ğŸ‡"?20:25;return A(x=>x+i),v.playMatchSuccess(),{...t,hit:!0}}return t})))},[a,h,c,w,E,S]);n.useEffect(()=>{if(!a)return;const s=()=>{k(),j.current=requestAnimationFrame(s)};return j.current=requestAnimationFrame(s),()=>{j.current&&cancelAnimationFrame(j.current)}},[a,k]),n.useEffect(()=>{if(!a)return;const s=setInterval(()=>{Math.random()<.7&&T()},1e3);return()=>clearInterval(s)},[a,T]),n.useEffect(()=>{if(!a||h)return;const s=setInterval(()=>{const t=g,m={id:Date.now()+Math.random(),x:g,y:M-60,targetX:t,targetY:-100,progress:0,hit:!1};y(d=>[...d,m]),Math.random()<.3&&v.playTileSelect()},50);return()=>clearInterval(s)},[a,h,g]);const O=_?.typeData.emoji||"ğŸ±";return e.jsxs(r.div,{className:"max-w-4xl mx-auto p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(r.h2,{className:"text-3xl font-bold gradient-text mb-4",initial:{scale:.9},animate:{scale:1},transition:{delay:.2},children:"ğŸ”« Fruit Shooter"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Control your pet to shoot falling fruits! Don't let them hit the ground!"}),a?e.jsxs("div",{className:"flex justify-center gap-6 mb-4",children:[e.jsx("div",{className:"glass-card px-4 py-2 rounded-lg",children:e.jsxs("span",{className:"text-white font-semibold",children:["Score: ",c]})}),e.jsx("div",{className:"glass-card px-4 py-2 rounded-lg",children:e.jsxs("span",{className:"text-white font-semibold",children:["Lives: ","â¤ï¸".repeat(p)]})})]}):e.jsx(r.button,{className:"bg-gradient-to-r from-purple-500 to-pink-600 text-white px-8 py-3 rounded-xl font-bold shadow-lg hover:shadow-purple-500/30 transition-all duration-300 btn-modern",onClick:D,whileHover:{scale:1.05},whileTap:{scale:.95},children:"ğŸ® Start Game"})]}),a&&!h&&e.jsx(r.div,{className:"relative mx-auto",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3},children:e.jsxs("div",{ref:N,className:"relative bg-gradient-to-b from-green-400 via-blue-500 to-purple-600 rounded-2xl shadow-2xl overflow-hidden cursor-crosshair",style:{width:b,height:M},onMouseMove:X,children:[e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute top-10 left-10 w-20 h-20 bg-white/30 rounded-full animate-pulse",style:{animationDelay:"0s"}}),e.jsx("div",{className:"absolute top-20 right-20 w-16 h-16 bg-white/30 rounded-full animate-pulse",style:{animationDelay:"1s"}}),e.jsx("div",{className:"absolute bottom-20 left-1/4 w-12 h-12 bg-white/30 rounded-full animate-pulse",style:{animationDelay:"2s"}})]}),e.jsx(L,{children:Y.map(s=>e.jsx(r.div,{className:"absolute text-2xl",style:{left:s.x,top:s.y,width:o,height:o},initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},exit:{scale:0,opacity:0,rotate:180},transition:{duration:.3},children:e.jsx(r.span,{animate:{y:[0,-3,0],rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:s.type})},s.id))}),e.jsx(L,{children:w.map(s=>e.jsx(r.div,{className:"absolute w-2 bg-yellow-400 rounded-full shadow-lg shadow-yellow-400/50",style:{left:s.x+(s.targetX-s.x)*s.progress,top:s.y+(s.targetY-s.y)*s.progress,height:"12px",transform:"translate(-50%, -50%)"},initial:{scale:0},animate:{scale:1},exit:{scale:0,opacity:0},transition:{duration:.1}},s.id))}),e.jsx(r.div,{className:"absolute bottom-4 text-4xl",style:{left:g,transform:"translateX(-50%)"},animate:{scale:[1,1.05,1],y:[0,-2,0]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},children:O}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-3 bg-gradient-to-r from-red-500 via-red-600 to-red-500"}),e.jsx("div",{className:"absolute top-4 right-4 glass-card px-3 py-1 rounded-lg",children:e.jsx("span",{className:"text-white font-bold text-sm",children:c})}),e.jsx("div",{className:"absolute top-4 left-4 flex gap-1",children:Array.from({length:3},(s,t)=>e.jsx(r.span,{className:"text-2xl",animate:{scale:t<p?[1,1.2,1]:[1,.8,1],opacity:t<p?1:.3},transition:{duration:.5},children:"â¤ï¸"},t))})]})}),h&&e.jsx(r.div,{className:"text-center mt-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:e.jsxs("div",{className:"glass-card p-6 rounded-2xl inline-block",children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"ğŸ’” Game Over!"}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Final Score: ",c,e.jsx("br",{}),p>0?"Time's up!":"All lives lost!"]}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx(r.button,{className:"bg-gradient-to-r from-purple-500 to-pink-600 text-white px-6 py-2 rounded-xl font-bold btn-modern",onClick:D,whileHover:{scale:1.05},whileTap:{scale:.95},children:"ğŸ”„ Play Again"}),e.jsx(r.button,{className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-6 py-2 rounded-xl font-bold btn-modern",onClick:()=>F(!1),whileHover:{scale:1.05},whileTap:{scale:.95},children:"ğŸ  Back to Menu"})]})]})}),!a&&e.jsxs(r.div,{className:"glass-card p-6 rounded-2xl mt-6 max-w-2xl mx-auto",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4 text-center",children:"ğŸ“‹ How to Play"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-300",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"ğŸ¯"}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-white",children:"Objective:"})," Shoot falling fruits before they hit the ground"]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"ğŸ–±ï¸"}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-white",children:"Controls:"})," Move mouse left/right to control your pet - lasers shoot automatically!"]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"ğŸğŸŒğŸ‡ğŸ‘"}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-white",children:"Fruits:"})," Different fruits give different points"]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"â¤ï¸"}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-white",children:"Lives:"})," Lose a heart when fruits hit the ground"]})]})]})]})]})};export{J as default};
