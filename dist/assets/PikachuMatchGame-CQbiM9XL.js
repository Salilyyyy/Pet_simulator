import{r as f,j as e,m as x,A as q}from"./framer-ImROKbaA.js";import{u as K,P as L,s as g}from"./index-CWbnnzAN.js";import"./vendor-Bzgz95E1.js";import"./zustand-C3EHBv_w.js";const J=()=>{const{setMessage:k,completeMiniGame:O}=K(),[h,w]=f.useState([]),[z,y]=f.useState([]),[j,I]=f.useState(0),[N,G]=f.useState(0),[u,P]=f.useState(!1),[v,S]=f.useState(!1),[E,H]=f.useState(120),m=8,_=m*m,D=f.useCallback(()=>{const t=[],l=Object.keys(L);let i=0;for(let a=0;a<_/2;a++){const s=l[a%l.length],n=L[s];t.push({id:i++,petType:s,emoji:n.emoji,isMatched:!1,isSelected:!1}),t.push({id:i++,petType:s,emoji:n.emoji,isMatched:!1,isSelected:!1})}for(let a=t.length-1;a>0;a--){const s=Math.floor(Math.random()*(a+1));[t[a],t[s]]=[t[s],t[a]]}w(t),y([]),I(0),G(0),S(!1),H(120)},[]),A=()=>{P(!0),D(),g.playGameStart()},F=(t,l)=>{if(t.id===l.id)return!1;const i=B(t.id),a=B(l.id);if(!i||!a)return!1;if(i.row===a.row){const s=Math.min(i.col,a.col),n=Math.max(i.col,a.col);let r=!0;for(let c=s+1;c<n;c++){const d=i.row*m+c,o=h.find(p=>p.id===d);if(o&&!o.isMatched){r=!1;break}}if(r)return!0}if(i.col===a.col){const s=Math.min(i.row,a.row),n=Math.max(i.row,a.row);let r=!0;for(let c=s+1;c<n;c++){const d=c*m+i.col,o=h.find(p=>p.id===d);if(o&&!o.isMatched){r=!1;break}}if(r)return!0}for(let s=0;s<m;s++){if(s===i.col||s===a.col)continue;const n=i.row*m+s,r=a.row*m+s,c=h.find(o=>o.id===n),d=h.find(o=>o.id===r);if(c?.isMatched!==!1&&d?.isMatched!==!1){const o=b(i.row,i.col,s),p=b(a.row,a.col,s),T=M(i.row,s,a.row),C=M(a.row,s,i.row);if(o&&C||p&&T)return!0}}for(let s=0;s<m;s++){if(s===i.row||s===a.row)continue;const n=s*m+i.col,r=s*m+a.col,c=h.find(o=>o.id===n),d=h.find(o=>o.id===r);if(c?.isMatched!==!1&&d?.isMatched!==!1){const o=M(i.row,i.col,s),p=M(a.row,a.col,s),T=b(s,i.col,a.col),C=b(s,a.col,i.col);if(o&&C||p&&T)return!0}}return!1},B=t=>{const l=h.findIndex(i=>i.id===t);return l===-1?null:{row:Math.floor(l/m),col:l%m}},b=(t,l,i)=>{const a=Math.min(l,i),s=Math.max(l,i);for(let n=a;n<=s;n++){const r=t*m+n,c=h.find(d=>d.id===r);if(c&&!c.isMatched&&r!==t*m+l&&r!==t*m+i)return!1}return!0},M=(t,l,i)=>{const a=Math.min(t,i),s=Math.max(t,i);for(let n=a;n<=s;n++){const r=n*m+l,c=h.find(d=>d.id===r);if(c&&!c.isMatched&&r!==t*m+l&&r!==i*m+l)return!1}return!0},R=t=>{if(!u||v)return;const l=h.find(a=>a.id===t);if(!l||l.isMatched||l.isSelected)return;g.playTileSelect();const i=[...z,t];if(y(i),w(a=>a.map(s=>s.id===t?{...s,isSelected:!0}:s)),i.length===2){G(c=>c+1);const[a,s]=i,n=h.find(c=>c.id===a),r=h.find(c=>c.id===s);n&&r&&n.petType===r.petType&&F(n,r)?setTimeout(()=>{g.playMatchSuccess(),w(d=>d.map(o=>o.id===a||o.id===s?{...o,isMatched:!0,isSelected:!1}:{...o,isSelected:!1})),y([]),I(d=>d+10),h.filter(d=>!d.isMatched&&d.id!==a&&d.id!==s).length<=2&&(S(!0),g.playGameComplete(),O("pikachu-match",j+10,N+1))},500):setTimeout(()=>{g.playMatchFailure(),w(c=>c.map(d=>({...d,isSelected:!1}))),y([])},1e3)}};f.useEffect(()=>{if(!u||v)return;const t=setInterval(()=>{H(l=>l<=1?(S(!0),k(`‚è∞ Time's up! Final score: ${j}`),0):(l===11&&g.playTimerWarning(),l-1))},1e3);return()=>clearInterval(t)},[u,v,j,k]);const $=t=>{const l=Math.floor(t/60),i=t%60;return`${l}:${i.toString().padStart(2,"0")}`};return e.jsxs(x.div,{className:"max-w-4xl mx-auto p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(x.h2,{className:"text-3xl font-bold gradient-text mb-4",initial:{scale:.9},animate:{scale:1},transition:{delay:.2},children:"üêæ Pet Match Game"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Connect two identical pet images to make them disappear!"}),u?e.jsxs("div",{className:"flex justify-center gap-6 mb-4",children:[e.jsx("div",{className:"glass-card px-4 py-2 rounded-lg",children:e.jsxs("span",{className:"text-white font-semibold",children:["Score: ",j]})}),e.jsx("div",{className:"glass-card px-4 py-2 rounded-lg",children:e.jsxs("span",{className:"text-white font-semibold",children:["Moves: ",N]})}),e.jsx("div",{className:"glass-card px-4 py-2 rounded-lg",children:e.jsxs("span",{className:"text-white font-semibold",children:["Time: ",$(E)]})})]}):e.jsx(x.button,{className:"bg-gradient-to-r from-purple-500 to-pink-600 text-white px-8 py-3 rounded-xl font-bold shadow-lg hover:shadow-purple-500/30 transition-all duration-300 btn-modern",onClick:A,whileHover:{scale:1.05},whileTap:{scale:.95},children:"üéÆ Start Game"})]}),u&&e.jsxs(x.div,{className:"relative",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3},children:[e.jsx("div",{className:"grid grid-cols-8 gap-2 max-w-2xl mx-auto bg-black/20 p-4 rounded-2xl backdrop-blur-sm",children:e.jsx(q,{children:h.map((t,l)=>e.jsx(x.div,{className:`aspect-square rounded-lg cursor-pointer transition-all duration-300 relative overflow-hidden ${t.isMatched?"opacity-0 scale-0":t.isSelected?"ring-4 ring-yellow-400 scale-105":"hover:scale-105"}`,onClick:()=>R(t.id),initial:{scale:0,rotate:-180},animate:{scale:t.isMatched?0:1,rotate:0,opacity:t.isMatched?0:1},exit:{scale:0,opacity:0},transition:{delay:l*.02,type:"spring",stiffness:200},whileHover:!t.isMatched&&!t.isSelected?{scale:1.1}:{},whileTap:{scale:.9},children:e.jsxs("div",{className:`w-full h-full glass-card flex items-center justify-center text-2xl relative ${t.isSelected?"bg-yellow-400/20":""}`,children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300"}),e.jsx(x.span,{className:"relative z-10 filter drop-shadow-lg",animate:t.isSelected?{scale:[1,1.2,1],rotate:[0,10,-10,0]}:{},transition:{duration:.5},children:t.emoji}),t.isSelected&&e.jsx(x.div,{className:"absolute inset-0 border-4 border-yellow-400 rounded-lg",initial:{opacity:0},animate:{opacity:1},transition:{duration:.2}}),t.isMatched&&e.jsx(x.div,{className:"absolute inset-0 bg-gradient-to-r from-green-400 to-blue-500 rounded-lg",initial:{scale:0,opacity:0},animate:{scale:1,opacity:.8},transition:{duration:.3}})]})},t.id))})}),v&&e.jsx(x.div,{className:"text-center mt-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:e.jsxs("div",{className:"glass-card p-6 rounded-2xl inline-block",children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"üéâ Game Completed!"}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Score: ",j," | Moves: ",N," | Time: ",$(120-E)]}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx(x.button,{className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white px-6 py-2 rounded-xl font-bold btn-modern",onClick:A,whileHover:{scale:1.05},whileTap:{scale:.95},children:"üîÑ Play Again"}),e.jsx(x.button,{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-2 rounded-xl font-bold btn-modern",onClick:()=>P(!1),whileHover:{scale:1.05},whileTap:{scale:.95},children:"üè† Back to Menu"})]})]})})]}),!u&&e.jsxs(x.div,{className:"glass-card p-6 rounded-2xl mt-6 max-w-2xl mx-auto",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4 text-center",children:"üìã How to Play"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-300",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"üéØ"}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-white",children:"Objective:"})," Match pairs of identical pet images"]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"‚ö°"}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-white",children:"Click:"})," Select two tiles to try matching them"]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"‚è∞"}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-white",children:"Time:"})," Complete the game within 2 minutes"]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"üèÜ"}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-white",children:"Score:"})," 10 points for each successful match"]})]})]})]})]})};export{J as default};
